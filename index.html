<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Church Media Workshop ‚Äî Registration</title>
  <style>
    :root{
      --bg: #0b0f14;
      --surface: rgba(255,255,255,0.02);
      --page-glass: rgba(255,255,255,0.03);
      --card: rgba(255,255,255,0.03);
      --muted: #9aa6b2;
      --text: #eef6ff;
      --accent: #2f9afe;
      --glass-border: rgba(255,255,255,0.04);
      --radius: 12px;
      --shadow-strong: 0 18px 50px rgba(2,6,23,0.6);
      --max-width: 980px;
      --header-icon: #ffffff;
      --header-top-gap: 12px;
      --header-height: 66px;
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; margin:0; font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; background:var(--bg); color:var(--text); }
    a{ color:var(--accent); text-decoration:none; }
    button{ font:inherit; }

    .page {
      max-width:var(--max-width);
      margin:14px auto;
      background: linear-gradient(180deg, var(--page-glass), rgba(255,255,255,0.02));
      border-radius:16px;
      box-shadow: var(--shadow-strong);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(6px);
      padding-top: calc(var(--header-height) + 18px);
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
    }

    body.modal-open .page { filter: blur(6px); }
    body.scrolling .page { transform: translateY(-6px) scale(0.9995); box-shadow: 0 22px 60px rgba(2,6,23,0.12); }

    header.topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 14px;
      position:fixed;
      top:var(--header-top-gap);
      left:50%;
      transform:translateX(-50%);
      z-index:10050;
      width:calc(100% - 28px);
      max-width:var(--max-width);
      background: linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.02));
      border-bottom:1px solid rgba(255,255,255,0.02);
      backdrop-filter: blur(6px);
      border-radius:12px;
      box-shadow: 0 8px 20px rgba(2,6,23,0.12);
      transition: padding .18s ease, box-shadow .18s ease, transform .18s ease, background .18s ease;
    }

    header.topbar.scrolled{
      padding:6px 12px;
      box-shadow: 0 20px 50px rgba(2,6,23,0.16);
      transform: translateX(-50%) translateY(-6px);
    }

    header.topbar.menu-open{
      background: #000 !important;
      border-bottom-color: #000 !important;
      box-shadow: none !important;
      border-bottom: 1px solid #000 !important;
    }

    .left, .center, .right { display:flex; align-items:center; gap:10px; }
    .center { flex:1; justify-content:center; }

    .hamburger{
      width:46px; height:46px;
      display:flex; align-items:center; justify-content:center;
      background:transparent;
      border-radius:10px;
      border:1px solid transparent;
      cursor:pointer;
      transition:transform .18s ease, background .18s ease;
      color: var(--header-icon);
    }
    .hamburger:active{ transform:scale(.98); }
    .hamburger:focus{ outline:2px solid rgba(47,154,254,0.13); border-color:rgba(47,154,254,0.12); }

    .logo { height:56px; width:auto; border-radius:10px; object-fit:cover; box-shadow: 0 8px 24px rgba(0,0,0,0.25); transition: height .18s ease, box-shadow .18s ease; }
    header.topbar.scrolled .logo{ height:44px; }

    .content { padding:16px; display:flex; flex-direction:column; gap:16px; }
    .content > section > h3, #coverage > h3, #experience > h3, #workshop-details > h3, #registration > h3, #contact > h3 { text-align:center; margin:6px 0 10px 0; color:var(--text); }
    
    .hero { background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border-radius:12px; padding:16px; text-align:center; overflow:hidden; position:relative; border:1px solid var(--glass-border); }
    .title-wrap{ display:flex; flex-direction:column; align-items:center; gap:8px; justify-content:center; }
    .title { font-weight:900; color:var(--text); margin:0; white-space:nowrap; font-size: clamp(20px, 7.6vw, 36px); line-height:1; letter-spacing:0.6px; text-align:center; padding:0 12px; }
    .hosted { font-weight:600; color:var(--muted); font-size:11px; margin:0; text-align:center; }
    
    .hero-image, .full-image{ width:100%; display:block; margin-top:14px; border-radius:10px; box-shadow: 0 12px 30px rgba(2,6,23,0.35); border:1px solid rgba(255,255,255,0.03); object-fit:cover; max-height:360px; transition: transform .25s ease; }
    body.scrolling .hero-image, body.scrolling .full-image { transform: translateY(-8px) scale(1.002); }
    
    .verse{ margin-top:12px; font-weight:700; color:var(--text); font-size:15px; }
    .verse .ref{ font-weight:600; color:var(--muted); display:block; margin-top:6px; font-size:13px; }
    .lead{ margin-top:10px; color:var(--muted); font-size:14px; line-height:1.45; white-space:pre-line; }
    
    .button-group{ margin-top:16px; display:flex; flex-direction:column; gap:8px; align-items:center; }
    .anchor-register, .anchor-check-status{ display:inline-flex; gap:8px; align-items:center; justify-content:center; padding:10px 20px; border-radius:9px; color:white; font-weight:700; cursor:pointer; border:0; text-decoration:none; box-shadow: 0 10px 28px rgba(47,154,254,0.18); white-space:nowrap; width:100%; max-width:280px; }
    .anchor-register{ background:linear-gradient(180deg,var(--accent), #0b6fe6); }
    .anchor-check-status{ background:linear-gradient(180deg, #10b981, #059669); }
    .anchor-check-status:hover{ opacity:0.9; }
    
    .cover-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; margin-top:12px; }
    @media (max-width:640px){ .cover-grid{ grid-template-columns:1fr; } }
    
    .cover-box{ background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border-radius:12px; padding:12px; border:1px solid var(--glass-border); display:flex; gap:12px; align-items:flex-start; cursor:default; min-height:70px; transition: transform .22s ease, box-shadow .22s ease; }
    .cover-box:hover{ transform:translateY(-6px); box-shadow: 0 14px 30px rgba(2,6,23,0.12); }
    
    .cover-deco{ width:46px; height:46px; border-radius:8px; background:linear-gradient(180deg,var(--accent), #0b6fe6); display:flex; align-items:center; justify-content:center; color:white; font-weight:700; flex:0 0 46px; font-size:16px; box-shadow: 0 8px 20px rgba(2,6,23,0.25); }
    .cover-content h4{ margin:0; font-size:15px; color:var(--text); text-align:left; }
    .cover-content p{ margin:6px 0 0 0; color:var(--muted); font-size:13px; line-height:1.35; }
    
    .contact-card{ margin-top:12px; border-radius:12px; padding:16px; background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border:1px solid var(--glass-border); box-shadow: 0 8px 26px rgba(2,6,23,0.06); }
    .contact-info{ display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:16px; margin-bottom:20px; }
    .contact-item{ display:flex; flex-direction:column; gap:6px; }
    .contact-item strong{ color:var(--text); font-size:14px; }
    .contact-item p{ margin:0; color:var(--muted); font-size:14px; }
    .contact-form{ display:flex; flex-direction:column; gap:12px; }

    .details-card{ margin-top:10px; border-radius:12px; padding:14px; background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border:1px solid var(--glass-border); box-shadow: 0 8px 26px rgba(2,6,23,0.06); }
    .details-card h3{ margin:0 0 8px 0; }
    .details-card p{ margin:0; color:var(--muted); font-size:14px; }
    
    .details-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px; margin-top:12px; }
    .detail-item{ display:flex; gap:12px; align-items:flex-start; padding:12px; border-radius:12px; border:1px solid var(--glass-border); background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); box-shadow: 0 8px 20px rgba(2,6,23,0.04); min-height:72px; transition: transform .18s ease, box-shadow .18s ease; }
    .detail-item:hover{ transform: translateY(-6px); box-shadow: 0 20px 40px rgba(2,6,23,0.08); }
    
    .detail-icon{ width:54px; height:54px; border-radius:10px; background:linear-gradient(180deg,var(--accent), #0b6fe6); display:flex; align-items:center; justify-content:center; color:white; font-weight:700; flex:0 0 54px; font-size:18px; box-shadow: 0 8px 22px rgba(2,6,23,0.18); }
    .detail-content{ display:flex; flex-direction:column; gap:4px; }
    .detail-content strong{ font-size:13px; color:var(--muted); }
    .detail-main{ font-weight:700; color:var(--text); font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .detail-sub{ color:var(--muted); font-size:12px; }
    
    .form-card{ margin-top:6px; border-radius:12px; padding:14px; background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border:1px solid var(--glass-border); box-shadow: 0 8px 26px rgba(2,6,23,0.08); }
    .form-card h3{ margin:0 0 6px 0; font-size:18px; color:var(--text); }
    .muted-note{ color:var(--muted); font-size:13px; margin-bottom:8px; }
    
    .field{ display:flex; flex-direction:column; gap:6px; margin-top:8px; }
    label{ font-size:13px; color:var(--text); font-weight:700; }
    input[type="text"], input[type="email"], input[type="tel"], select, textarea {
      padding:10px 12px; border-radius:10px; border:1px solid var(--glass-border);
      background: rgba(255,255,255,0.02); color:var(--text); font-size:14px; outline:none;
    }
    input:focus, textarea:focus { box-shadow: 0 10px 30px rgba(47,154,254,0.12); border-color:var(--accent); }
    
    .role-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:8px; margin-top:8px; }
    @media (max-width:640px){ .role-grid{ grid-template-columns:1fr; } }
    
    .option{ position:relative; display:block; cursor:pointer; }
    .option input{ position:absolute; left:8px; top:50%; transform:translateY(-50%); width:18px; height:18px; margin:0; opacity:0; z-index:3; }
    .option-card{ display:flex; gap:12px; align-items:center; padding:10px 14px 10px 56px; border-radius:10px; border:1px solid var(--glass-border); background: transparent; transition: box-shadow .18s ease, border-color .18s ease, background .18s ease, transform .12s ease; position:relative; min-height:56px; }
    .option-card:hover{ transform:translateY(-3px); box-shadow: 0 12px 30px rgba(2,6,23,0.06); }
    .option-card::before{ content: ""; position:absolute; left:18px; top:50%; transform:translateY(-50%); width:20px; height:20px; border-radius:50%; background:transparent; border:2px solid var(--glass-border); z-index:2; transition: border-color .12s ease, background .12s ease; }
    .option-card::after{ content: ""; position:absolute; left:23px; top:50%; transform:translateY(-50%) scale(0); width:10px; height:10px; border-radius:50%; background:var(--accent); z-index:2; transition: transform .12s ease; }
    .option input:checked + .option-card{ border-color:var(--accent); background: linear-gradient(180deg, rgba(47,154,254,0.05), rgba(47,154,254,0.02)); box-shadow: 0 12px 34px rgba(47,154,254,0.08); }
    .option input:checked + .option-card::before{ border-color:var(--accent); background: rgba(47,154,254,0.04); }
    .option input:checked + .option-card::after{ transform:translateY(-50%) scale(1); }
    
    .opt-text{ display:flex; flex-direction:column; min-width:0; align-items:flex-start; }
    .opt-text strong{ font-size:14px; color:var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; text-align:left; }
    .opt-text small{ color:var(--muted); font-size:12px; margin-top:4px; text-align:left; }
    
    .submit-wrap{ display:flex; justify-content:center; margin-top:12px; }
    .submit-btn{ background:linear-gradient(180deg,var(--accent), #0b6fe6); color:white; border:0; padding:10px 18px; border-radius:10px; font-weight:800; cursor:pointer; white-space:nowrap; transition: opacity .2s ease; }
    .submit-btn:disabled{ opacity:0.6; cursor:not-allowed; }
    
    .success-modal{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%) scale(.96); min-width:280px; max-width:94%; z-index:10020; padding:16px; border-radius:12px; background:var(--card); box-shadow: 0 30px 80px rgba(2,6,23,0.6); display:none; opacity:0; border:1px solid var(--glass-border); text-align:center; transition:transform .18s ease, opacity .18s ease; max-height:90vh; overflow-y:auto; }
    .success-modal.open{ display:block; opacity:1; transform:translate(-50%,-50%) scale(1); }
    .success-tick { font-size:48px; color: #10b981; margin-bottom:10px; }
    .success-modal div{ margin:8px 0; font-size:13px; color:var(--muted); }
    .success-modal div strong{ color:var(--text); font-weight:700; }

    .certificate-container {
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
      border-radius: 12px;
      padding: 20px;
      margin: 16px 0;
      text-align: center;
      border: 2px solid #60a5fa;
    }

    .cert-header {
      color: #fff;
      font-size: 18px;
      font-weight: 800;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .cert-code {
      background: rgba(255,255,255,0.95);
      color: #1e3a8a;
      padding: 12px;
      border-radius: 8px;
      font-size: 20px;
      font-weight: 900;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
    }

    .qrcode-container {
      background: white;
      padding: 12px;
      border-radius: 8px;
      display: inline-block;
      margin: 12px 0;
    }

    .qrcode-container img {
      width: 160px;
      height: 160px;
    }

    .cert-info {
      color: rgba(255,255,255,0.95);
      font-size: 12px;
      margin-top: 10px;
    }

    .download-btn {
      background: #10b981;
      color: white;
      border: 0;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 800;
      cursor: pointer;
      margin-top: 12px;
    }

    .download-btn:hover {
      background: #059669;
    }

    .error-modal{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%) scale(.96); min-width:280px; max-width:94%; z-index:10020; padding:16px; border-radius:12px; background:var(--card); box-shadow: 0 30px 80px rgba(2,6,23,0.6); display:none; opacity:0; border:1px solid var(--glass-border); text-align:center; transition:transform .18s ease, opacity .18s ease; }
    .error-modal.open{ display:block; opacity:1; transform:translate(-50%,-50%) scale(1); }
    .error-icon { font-size:48px; color: #f87171; margin-bottom:10px; }

    .contact-modal{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%) scale(.96); min-width:300px; max-width:94%; z-index:10020; padding:16px; border-radius:12px; background:var(--card); box-shadow: 0 30px 80px rgba(2,6,23,0.6); display:none; opacity:0; border:1px solid var(--glass-border); transition:transform .18s ease, opacity .18s ease; }
    .contact-modal.open{ display:block; opacity:1; transform:translate(-50%,-50%) scale(1); }
    .contact-modal h3{ margin:0 0 8px 0; color:var(--text); text-align:center; }
    .contact-modal p{ margin:0 0 12px 0; color:var(--muted); font-size:13px; text-align:center; }

    .menu-overlay{
      position:fixed;
      left:0; right:0; top:0; bottom:0;
      z-index:10010;
      display:none;
      background: #000;
      pointer-events:auto;
    }

    .menu-panel{
      position:fixed; left:0; top:0; bottom:0;
      width:80vw; max-width:420px;
      background:#000;
      padding:18px;
      transform:translateX(-110%);
      transition:transform .34s cubic-bezier(.2,.9,.2,1);
      box-shadow: 0 20px 60px rgba(2,6,23,0.6);
      border-right:1px solid var(--glass-border);
      border-radius:0 14px 14px 0;
      z-index:10015;
    }
    .menu-panel.open{ transform:translateX(0); }

    .menu-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:18px; }
    .menu-list{ display:flex; flex-direction:column; gap:12px; }
    .menu-item{ padding:12px 10px; border-radius:10px; font-weight:800; color:var(--text); cursor:pointer; background:transparent; border:1px solid transparent; }
    .menu-item:hover{ background:rgba(255,255,255,0.02); transform:translateX(4px); }

    .close-btn-icon{ width:42px; height:42px; display:flex; align-items:center; justify-content:center; border-radius:10px; background:transparent; border:1px solid transparent; cursor:pointer; color:var(--text); }

    .check-status-modal{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%) scale(.96); min-width:300px; max-width:94%; z-index:10020; padding:16px; border-radius:12px; background:#000 !important; box-shadow: 0 30px 80px rgba(2,6,23,0.6); display:none; opacity:0; border:1px solid var(--glass-border); transition:transform .18s ease, opacity .18s ease; }
    .check-status-modal.open{ display:block; opacity:1; transform:translate(-50%,-50%) scale(1); }

    .modal-close-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      border: 1px solid var(--glass-border);
      border-radius: 8px;
      cursor: pointer;
      color: var(--text);
      transition: transform .2s ease;
    }

    .modal-close-btn:hover {
      transform: scale(1.1);
    }

    .status-input-wrap {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin: 12px 0;
    }

    .status-input-wrap input {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--glass-border);
      background: rgba(255,255,255,0.02);
      color: var(--text);
      font-size: 14px;
    }

    .status-input-wrap input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 10px 30px rgba(47,154,254,0.12);
    }

    .status-result {
      background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
      border-radius: 12px;
      padding: 12px;
      border: 1px solid var(--glass-border);
      margin-top: 12px;
      text-align: left;
    }

    .status-result.found {
      border-color: #10b981;
      background: rgba(16, 185, 129, 0.05);
    }

    .status-result.not-found {
      border-color: #f87171;
      background: rgba(248, 113, 113, 0.05);
    }

    .status-detail {
      margin: 8px 0;
      font-size: 13px;
      color: var(--muted);
    }

    .status-detail strong {
      color: var(--text);
      font-weight: 700;
    }

    .paid-badge {
      display: inline-block;
      background: #10b981;
      color: white;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 700;
      margin-top: 8px;
    }

    .pending-badge {
      display: inline-block;
      background: #f59e0b;
      color: white;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 700;
      margin-top: 8px;
    }

    .reveal{ opacity:0; transform:translateY(18px); transition:opacity .6s ease, transform .6s ease; will-change:transform,opacity; }
    .reveal.in-view{ opacity:1; transform:none; }
    
    footer{ margin-top:12px; padding:12px 18px; text-align:center; color:var(--muted); font-size:13px; border-top:1px solid rgba(255,255,255,0.02); }
    
    @media (max-width:980px){ .page{ margin:8px; border-radius:12px; } .hero-image, .full-image{ max-height:260px; } header.topbar{ left:50%; transform:translateX(-50%); width:calc(100% - 32px); padding:10px; } }
    @media (max-width:480px){ .logo{ height:48px; } header.topbar{ padding:10px; } .title{ font-size: clamp(18px, 9.4vw, 28px); white-space: normal; } .hero-image, .full-image{ max-height:220px; border-radius:10px; } .qrcode-container img { width: 120px; height: 120px; } }
  </style>
</head>
<body>
  <div class="page" role="main" aria-label="Church Media Workshop registration page">
    <header class="topbar" role="banner" aria-label="Top navigation">
      <div class="left">
        <button class="hamburger" id="hamburgerBtn" aria-label="Open menu" aria-expanded="false" title="Open menu">
          <svg id="hamburgerSvg" width="20" height="14" viewBox="0 0 20 14" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect y="1" width="20" height="2" rx="1" fill="currentColor"/>
            <rect y="6" width="20" height="2" rx="1" fill="currentColor" opacity="0.85"/>
            <rect y="11" width="20" height="2" rx="1" fill="currentColor" opacity="0.7"/>
          </svg>
        </button>
      </div>

      <div class="center">
        <img class="logo" src="https://raw.githubusercontent.com/ruachmedia/registration/refs/heads/main/logo.png.jfif" alt="Ruach Media logo">
      </div>

      <div class="right"></div>
    </header>
    <main class="content">
      <section id="home" class="hero reveal">
        <div class="title-container">
          <div class="title-wrap">
            <h1 class="title" aria-live="polite">CHURCH MEDIA WORKSHOP</h1>
            <div class="hosted">Hosted by Ruach Media and Production</div>
          </div>
        </div>
        <img class="hero-image reveal" src="https://raw.githubusercontent.com/Davidbantu/Soundtestapp/refs/heads/main/digital-mixer-recording-studio-with-computer-recording-sounds-music-concept-creativity-show-business.webp" alt="Digital mixer and recording studio" loading="lazy">
        <div class="verse reveal">"So faith comes from hearing, and hearing through the word of Christ." <span class="ref">Romans 10:17</span></div>
        <p class="lead reveal">Are you ready to take your church's production to the next level?
Join Ruach Media and Production for an intensive, one-day,
hands-on workshop designed specifically for church media teams
and volunteers.</p>
        <div class="button-group reveal">
          <button class="anchor-register" id="scrollRegisterBtn" aria-label="Register now">Register Now</button>
          <button class="anchor-check-status" id="scrollCheckStatusBtn" aria-label="Check Status">Check Status</button>
        </div>
      </section>

      <section id="coverage" class="reveal">
        <h3>What We're Covering</h3>
        <div class="cover-grid">
          <div class="cover-box reveal">
            <div class="cover-deco">MM</div>
            <div class="cover-content">
              <h4>Mixing Mastery</h4>
              <p>Deep dive into Analog Mixers and a masterclass on the Soundcraft Ui24R.</p>
            </div>
          </div>

          <div class="cover-box reveal">
            <div class="cover-deco">SP</div>
            <div class="cover-content">
              <h4>System Processing</h4>
              <p>Crossovers and DriveRack settings for crystal-clear audio.</p>
            </div>
          </div>

          <div class="cover-box reveal">
            <div class="cover-deco">VM</div>
            <div class="cover-content">
              <h4>Visual Ministry</h4>
              <p>Professional camera handling and dynamic Bible Presentation techniques.</p>
            </div>
          </div>

          <div class="cover-box reveal">
            <div class="cover-deco">DO</div>
            <div class="cover-content">
              <h4>Digital Outreach</h4>
              <p>Setting up and managing a high-quality live stream for your church.</p>
            </div>
          </div>

          <div class="cover-box reveal">
            <div class="cover-deco">GD</div>
            <div class="cover-content">
              <h4>Graphic Design</h4>
              <p>Creating impactful posters and visuals for your congregation.</p>
            </div>
          </div>

          <div class="cover-box reveal">
            <div class="cover-deco">PW</div>
            <div class="cover-content">
              <h4>Plugin Workflow</h4>
              <p>Bridging the gap between live sound and studio quality using WAVES PLUGINS.</p>
            </div>
          </div>
        </div>

        <img class="full-image reveal" src="https://raw.githubusercontent.com/Davidbantu/Soundtestapp/refs/heads/main/Waves.jpg.jpeg" alt="Waves artwork" loading="lazy">
      </section>

      <section id="experience" class="reveal">
        <h3>The Workshop Experience</h3>
        <p class="lead reveal">This isn't just a lecture. You will get one full day of hands-on experience with professional equipment. Whether you are a beginner looking to learn the basics or a veteran technician looking to sharpen your skills, there is a seat for you at the console.</p>

        <img class="full-image reveal" src="https://raw.githubusercontent.com/Davidbantu/Soundtestapp/refs/heads/main/UI24R-No-Talent_original%20(1).jpeg" alt="Soundcraft Ui24R" loading="lazy">
      </section>

      <section id="workshop-details" class="details-card reveal">
        <h3>Workshop Details</h3>
        <div class="details-grid">
          <div class="detail-item">
            <div class="detail-icon">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M7 11h5v5H7z" fill="rgba(255,255,255,0.95)"></path>
                <path d="M8 2v2M16 2v2M3 7h18M5 21h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1z" stroke="rgba(255,255,255,0.95)" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
            <div class="detail-content">
              <strong>Date</strong>
              <div class="detail-main">[Insert Date ‚Äî e.g. Sat 14 Feb 2026]</div>
              <div class="detail-sub">Full day, hands-on sessions</div>
            </div>
          </div>

          <div class="detail-item">
            <div class="detail-icon">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 7v6l4 2" stroke="rgba(255,255,255,0.95)" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="12" r="8" stroke="rgba(255,255,255,0.95)" stroke-width="1.3"/>
              </svg>
            </div>
            <div class="detail-content">
              <strong>Check‚Äëin</strong>
              <div class="detail-main">8:45 AM ‚Äî Session starts 9:00 AM</div>
              <div class="detail-sub">Please arrive early to register</div>
            </div>
          </div>

          <div class="detail-item">
            <div class="detail-icon">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 11.5a2 2 0 100-4 2 2 0 000 4z" fill="rgba(255,255,255,0.95)"/>
                <path d="M21 10c0 6-9 12-9 12S3 16 3 10a9 9 0 0118 0z" stroke="rgba(255,255,255,0.95)" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="detail-content">
              <strong>Location</strong>
              <div class="detail-main">[Insert Church / Venue Address]</div>
              <div class="detail-sub">Limited seating ‚Äî register early</div>
            </div>
          </div>
        </div>
      </section>

      <section id="registration" class="form-card reveal">
        <h3>Registration Form</h3>
        <div class="muted-note">Please fill out your details below. Seats are limited.</div>

        <form id="registration-form" autocomplete="on">
          <div class="field">
            <label for="fullName">Full Name *</label>
            <input id="fullName" name="fullName" type="text" required placeholder="Jane Doe">
          </div>

          <div class="field">
            <label for="phone">Phone Number *</label>
            <input id="phone" name="phone" type="tel" required placeholder="+123 456 7890">
          </div>

          <div class="field">
            <label for="email">Email Address *</label>
            <input id="email" name="email" type="email" required placeholder="you@example.com">
          </div>

          <div class="field">
            <label for="church">Home Church / Organization *</label>
            <input id="church" name="church" type="text" required placeholder="Your church or organization">
          </div>

          <div class="field">
            <label for="location">Location *</label>
            <input id="location" name="location" type="text" required placeholder="Town / City or venue">
          </div>

          <div class="field">
            <label>Skill Level & Interest ‚Äî What is your primary role? *</label>
            <div class="role-grid" role="radiogroup" aria-required="true">
              <label class="option" aria-label="Audio Engineer">
                <input type="radio" name="role" value="Audio Engineer">
                <div class="option-card" tabindex="-1">
                  <div class="opt-text"><strong>Audio Engineer</strong><small>Live sound, mixing</small></div>
                </div>
              </label>

              <label class="option" aria-label="Visual / Camera Operator">
                <input type="radio" name="role" value="Visual/Camera Operator">
                <div class="option-card" tabindex="-1">
                  <div class="opt-text"><strong>Visual / Camera Operator</strong><small>Cameras, framing</small></div>
                </div>
              </label>

              <label class="option" aria-label="Media / Graphics">
                <input type="radio" name="role" value="Media/Graphics">
                <div class="option-card" tabindex="-1">
                  <div class="opt-text"><strong>Media / Graphics</strong><small>Posters, overlays</small></div>
                </div>
              </label>

              <label class="option" aria-label="Church Leadership / Other">
                <input type="radio" name="role" value="Church Leadership/Other" checked>
                <div class="option-card" tabindex="-1">
                  <div class="opt-text"><strong>Church Leadership / Other</strong><small>Coordination & support</small></div>
                </div>
              </label>
            </div>
          </div>

          <div class="submit-wrap">
            <button type="button" class="submit-btn" id="payNowBtn">Pay Now (‚Çπ1200)</button>
          </div>

          <div id="form-status" aria-live="polite" style="margin-top:10px; text-align:center; font-size:13px;"></div>

          <div style="margin-top:8px; font-size:13px; color:var(--muted); text-align:center;">
            By submitting you agree to be contacted with workshop updates.
          </div>
        </form>
      </section>

      <section id="contact" class="form-card reveal">
        <h3>Contact Us</h3>
        <div class="contact-card">
          <div class="contact-info">
            <div class="contact-item">
              <strong>üìû Phone</strong>
              <p><a href="tel:+919876543210">+91 98765 43210</a></p>
            </div>
            <div class="contact-item">
              <strong>üìß Email</strong>
              <p><a href="mailto:info@ruachmedia.example">info@ruachmedia.example</a></p>
            </div>
          </div>

          <div class="contact-form">
            <div class="field">
              <label for="contactEmail">Email Address *</label>
              <input id="contactEmail" name="contactEmail" type="email" required placeholder="your@email.com">
            </div>

            <div class="field">
              <label for="contactMessage">Your Message *</label>
              <textarea id="contactMessage" name="contactMessage" required placeholder="Tell us your question or concern..." style="min-height:120px; resize:vertical;"></textarea>
            </div>

            <div class="submit-wrap">
              <button type="button" class="submit-btn" id="contactSubmitBtn">Send Message</button>
            </div>

            <div id="contact-status" aria-live="polite" style="margin-top:10px; text-align:center; font-size:13px;"></div>
          </div>
        </div>
      </section>

      <footer class="reveal">
        ¬© Ruach Media and Production ‚Äî All rights reserved ‚Ä¢ Questions? <a href="mailto:info@ruachmedia.example">info@ruachmedia.example</a>
      </footer>
    </main>
  </div>

  <!-- Menu Overlay -->
  <div class="menu-overlay" id="menuOverlay" aria-hidden="true">
    <nav class="menu-panel" role="navigation" aria-label="Main menu" id="menuPanel">
      <div class="menu-header">
        <strong style="font-size:16px; color:var(--text);">Menu</strong>
        <button class="close-btn-icon" id="menuCloseBtn" aria-label="Close menu">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <div class="menu-list" role="menu">
        <div class="menu-item" data-target="home" role="menuitem">Home</div>
        <div class="menu-item" data-target="registration" role="menuitem">Registration Form</div>
        <div class="menu-item" data-target="workshop-details" role="menuitem">Workshop Details</div>
        <div class="menu-item" data-target="contact" role="menuitem">Contact Us</div>
      </div>
    </nav>
  </div>

  <!-- Success Modal with Certificate -->
  <div class="success-modal" id="successModal">
    <div class="success-tick">‚úì</div>
    <h3 style="margin:0 0 8px 0; color:var(--text);">Payment Successful!</h3>
    <p style="margin:8px 0; color:var(--muted); font-size:13px;">Your registration is complete. Here's your confirmation code:</p>
    
    <div class="certificate-container">
      <div class="cert-header">WORKSHOP PASS</div>
      <div class="cert-code" id="confirmationCode">Ruach777001</div>
      
      <div class="qrcode-container">
        <img id="qrcodeImg" src="" alt="QR Code">
      </div>
      
      <div class="cert-info">
        <div>Scan this QR code to verify your registration</div>
        <div id="certUserName" style="margin-top:8px; font-weight:700; font-size:13px;"></div>
      </div>
    </div>

    <div id="successDetails" style="margin-top:12px;"></div>

    <button class="download-btn" id="downloadCertBtn">üì• Save as Image</button>
    <button class="submit-btn" id="successDoneBtn" style="margin-top:8px;">Done</button>
  </div>

  <!-- Error Modal (Email Already Exists) -->
  <div class="error-modal" id="errorModal">
    <button class="modal-close-btn" id="errorCloseBtn" aria-label="Close">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 6L6 18M6 6L18 18"/>
      </svg>
    </button>
    <div class="error-icon">‚ö†</div>
    <h3 style="margin:0 0 8px 0; color:var(--text);">Email Already Registered</h3>
    <p id="errorDetails" style="margin:8px 0; color:var(--muted); font-size:13px;"></p>
    <button class="submit-btn" id="errorDoneBtn" style="margin-top:16px;">OK</button>
  </div>

  <!-- Contact Success Modal -->
  <div class="contact-modal" id="contactSuccessModal">
    <button class="modal-close-btn" id="contactModalCloseBtn" aria-label="Close">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 6L6 18M6 6L18 18"/>
      </svg>
    </button>
    <div style="font-size:48px; color:#10b981; text-align:center; margin-bottom:12px;">‚úì</div>
    <h3>Thank You for Reaching Out!</h3>
    <p>We've received your message and will get back to you as soon as possible. Our team typically responds within 24-48 hours during business hours.</p>
    <p style="margin-top:12px; color:var(--accent); font-weight:700;">We appreciate your interest in the Church Media Workshop.</p>
    <div style="margin-top:16px; text-align:center;">
      <button class="submit-btn" id="contactModalDoneBtn">Close</button>
    </div>
  </div>

  <!-- Check Status Modal -->
  <div class="check-status-modal" id="checkStatusModal">
    <button class="modal-close-btn" id="statusCloseBtn" aria-label="Close">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 6L6 18M6 6L18 18"/>
      </svg>
    </button>
    <h3 style="margin:0 0 8px 0; color:var(--text);">Check Registration Status</h3>
    <p style="margin:8px 0 12px 0; color:var(--muted); font-size:13px;">Enter your confirmation code to check your registration status:</p>
    
    <div class="status-input-wrap">
      <input type="text" id="statusCodeInput" placeholder="e.g. Ruach777001" maxlength="15">
      <button class="submit-btn" id="statusCheckBtn" style="margin-top:8px;">Check Status</button>
    </div>

    <div id="statusResult"></div>
    <div id="statusLoading" style="text-align:center; margin-top:12px; display:none; color:var(--muted); font-size:13px;">Searching...</div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <!-- Razorpay Checkout Script -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <!-- QR Code Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <!-- HTML2Canvas for downloading image -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script>
    // Firebase config & init
    const firebaseConfig = {
      apiKey: "AIzaSyCWDx1Sj-S2liB2eI5h6pi4JwCxUokRDpw",
      authDomain: "newreservation-f307f.firebaseapp.com",
      databaseURL: "https://newreservation-f307f-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "newreservation-f307f",
      storageBucket: "newreservation-f307f.firebasestorage.app",
      messagingSenderId: "62177167686",
      appId: "1:62177167686:web:db2b353710dab365e3bd47",
      measurementId: "G-7DV9CVE3TM"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const registrationsRef = db.ref('registrations');
    const contactsRef = db.ref('contacts');

    // Razorpay Key ID (LIVE)
    const RAZORPAY_KEY = 'rzp_live_SFPgatX34SQ1qU';
    const PAYMENT_AMOUNT = 1200 * 100; // Amount in paise

    // ===== MENU FUNCTIONALITY =====
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuPanel = document.getElementById('menuPanel');
    const menuCloseBtn = document.getElementById('menuCloseBtn');
    const header = document.querySelector('header.topbar');

    function openMenu(){
      menuOverlay.style.display = 'block';
      requestAnimationFrame(()=> menuPanel.classList.add('open'));
      menuOverlay.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      header.classList.add('menu-open');
      setHamburgerToClose();
    }

    function closeMenu(){
      menuPanel.classList.remove('open');
      menuOverlay.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      setTimeout(()=> menuOverlay.style.display = 'none', 380);
      header.classList.remove('menu-open');
      setHamburgerToMenu();
    }

    function setHamburgerToMenu(){
      hamburgerBtn.setAttribute('aria-label','Open menu');
      hamburgerBtn.setAttribute('aria-expanded','false');
    }

    function setHamburgerToClose(){
      hamburgerBtn.setAttribute('aria-label','Close menu');
      hamburgerBtn.setAttribute('aria-expanded','true');
    }

    hamburgerBtn.addEventListener('click', ()=>{
      if(menuPanel.classList.contains('open')) closeMenu(); else openMenu();
    });

    menuCloseBtn.addEventListener('click', closeMenu);

    menuOverlay.addEventListener('click', (e)=>{
      if(e.target === menuOverlay) closeMenu();
    });

    // Menu items
    document.querySelectorAll('.menu-item').forEach(item=>{
      item.addEventListener('click', ()=>{
        const target = item.getAttribute('data-target');
        closeMenu();
        if(target){
          const el = document.getElementById(target);
          if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
        }
      });
    });

    // ===== MODAL HELPERS =====
    function openModal(modalEl){
      modalEl.classList.add('open');
      document.body.classList.add('modal-open');
    }

    function closeModal(modalEl){
      modalEl.classList.remove('open');
      const anyOpen = document.querySelectorAll('.success-modal.open, .error-modal.open, .check-status-modal.open, .contact-modal.open').length > 0;
      if(!anyOpen){
        document.body.classList.remove('modal-open');
      }
    }

    // ===== SCROLL BUTTONS =====
    document.getElementById('scrollRegisterBtn').addEventListener('click', function(){
      document.getElementById('registration').scrollIntoView({behavior:'smooth', block:'start'});
    });

    document.getElementById('scrollCheckStatusBtn').addEventListener('click', function(){
      openCheckStatusModal();
    });

    // ===== CHECK STATUS MODAL =====
    function openCheckStatusModal(){
      document.getElementById('statusCodeInput').value = '';
      document.getElementById('statusResult').innerHTML = '';
      document.getElementById('statusLoading').style.display = 'none';
      openModal(document.getElementById('checkStatusModal'));
      setTimeout(() => document.getElementById('statusCodeInput').focus(), 220);
    }

    document.getElementById('statusCloseBtn').addEventListener('click', ()=>{
      closeModal(document.getElementById('checkStatusModal'));
    });

    document.getElementById('statusCheckBtn').addEventListener('click', async ()=>{
      const code = document.getElementById('statusCodeInput').value.trim().toUpperCase();
      const resultEl = document.getElementById('statusResult');
      const loadingEl = document.getElementById('statusLoading');

      if(!code){
        resultEl.innerHTML = '<div class="status-result not-found"><strong style="color:#f87171;">Please enter a confirmation code</strong></div>';
        return;
      }

      loadingEl.style.display = 'block';
      resultEl.innerHTML = '';

      // Search in Firebase
      registrationsRef.orderByChild('confirmationCode').equalTo(code).once('value', (snapshot)=>{
        loadingEl.style.display = 'none';

        if(snapshot.exists()){
          const data = Object.values(snapshot.val())[0];
          const statusClass = data.paid ? 'found' : 'not-found';
          const statusBadge = data.paid ? '<span class="paid-badge">‚úì PAID</span>' : '<span class="pending-badge">‚è≥ PENDING</span>';

          resultEl.innerHTML = `
            <div class="status-result ${statusClass}">
              <div class="status-detail"><strong>Code:</strong> ${data.confirmationCode}</div>
              <div class="status-detail"><strong>Name:</strong> ${data.fullName}</div>
              <div class="status-detail"><strong>Email:</strong> ${data.email}</div>
              <div class="status-detail"><strong>Phone:</strong> ${data.phone}</div>
              <div class="status-detail"><strong>Church:</strong> ${data.church}</div>
              <div class="status-detail"><strong>Role:</strong> ${data.role}</div>
              <div class="status-detail"><strong>Amount:</strong> ‚Çπ${data.amount}</div>
              ${statusBadge}
            </div>
          `;
        } else {
          resultEl.innerHTML = '<div class="status-result not-found"><strong style="color:#f87171;">‚ùå No registration found with this code</strong><div class="status-detail" style="margin-top:8px; color:#f87171;">Please check the code and try again</div></div>';
        }
      });
    });

    // Enter key to check status
    document.getElementById('statusCodeInput').addEventListener('keypress', (e)=>{
      if(e.key === 'Enter'){
        document.getElementById('statusCheckBtn').click();
      }
    });

    // ===== CONTACT FORM =====
    document.getElementById('contactSubmitBtn').addEventListener('click', async function(){
      const contactEmail = document.getElementById('contactEmail').value.trim();
      const contactMessage = document.getElementById('contactMessage').value.trim();
      const statusEl = document.getElementById('contact-status');

      if(!contactEmail || !contactMessage){
        statusEl.textContent = 'Please fill all required fields.';
        statusEl.style.color = '#f87171';
        return;
      }

      if(!/^\S+@\S+\.\S+$/.test(contactEmail)){
        statusEl.textContent = 'Please enter a valid email address.';
        statusEl.style.color = '#f87171';
        return;
      }

      statusEl.textContent = 'Sending your message...';
      statusEl.style.color = 'var(--muted)';

      try {
        await contactsRef.push({
          email: contactEmail,
          message: contactMessage,
          submittedAt: new Date().toISOString()
        });

        document.getElementById('contactEmail').value = '';
        document.getElementById('contactMessage').value = '';
        statusEl.textContent = '';
        openModal(document.getElementById('contactSuccessModal'));
      } catch(err) {
        console.error(err);
        statusEl.textContent = 'Could not send message. Please try again later.';
        statusEl.style.color = '#f59e0b';
      }
    });

    document.getElementById('contactModalCloseBtn').addEventListener('click', ()=>{
      closeModal(document.getElementById('contactSuccessModal'));
    });

    document.getElementById('contactModalDoneBtn').addEventListener('click', ()=>{
      closeModal(document.getElementById('contactSuccessModal'));
    });

    // ===== REGISTRATION FUNCTIONALITY =====
    // Function to get next confirmation code
    async function getNextConfirmationCode() {
      return new Promise((resolve) => {
        const counterRef = db.ref('counter');
        counterRef.transaction((current) => {
          return (current || 777000) + 1;
        }).then((result) => {
          if (result.committed) {
            resolve('Ruach' + result.snapshot.val());
          }
        });
      });
    }

    // Form validation
    function validateRegistrationForm() {
      const form = document.getElementById('registration-form');
      const fullName = form.fullName.value.trim();
      const phone = form.phone.value.trim();
      const email = form.email.value.trim();
      const church = form.church.value.trim();
      const location = form.location.value.trim();
      const role = form.querySelector('input[name="role"]:checked') ? form.querySelector('input[name="role"]:checked').value : '';
      
      let valid = true;
      let msg = "";
      
      if(!fullName || !phone || !email || !church || !location) {
        valid = false;
        msg = "Please fill all required fields.";
      }
      else if(!/^\S+@\S+\.\S+$/.test(email)) {
        valid = false;
        msg = "Please enter a valid email address.";
      }
      else if(!/^\+?[0-9\s\-()]{7,}$/.test(phone)) {
        valid = false;
        msg = "Please enter a valid phone number.";
      }
      
      return {valid, msg};
    }

    // Check if email already exists
    async function checkEmailExists(email) {
      return new Promise((resolve) => {
        registrationsRef.orderByChild('email').equalTo(email).once('value', (snapshot) => {
          resolve(snapshot.exists());
        });
      });
    }

    // Handle Pay Now
    document.getElementById('payNowBtn').addEventListener('click', async function() {
      const statusEl = document.getElementById('form-status');
      const payBtn = document.getElementById('payNowBtn');
      
      const validation = validateRegistrationForm();
      if(!validation.valid) {
        statusEl.textContent = validation.msg;
        statusEl.style.color = "#f87171";
        return;
      }

      const form = document.getElementById('registration-form');
      const email = form.email.value.trim();
      
      payBtn.disabled = true;
      statusEl.textContent = "Checking registration...";
      statusEl.style.color = "var(--muted)";

      const emailExists = await checkEmailExists(email);
      
      if(emailExists) {
        payBtn.disabled = false;
        showErrorModal(email);
        statusEl.textContent = "";
        return;
      }

      statusEl.textContent = "Opening payment gateway...";
      statusEl.style.color = "var(--muted)";
      
      openRazorpayCheckout();
      payBtn.disabled = false;
    });

    // Open Razorpay Checkout
    function openRazorpayCheckout() {
      const form = document.getElementById('registration-form');
      const fullName = form.fullName.value.trim();
      const email = form.email.value.trim();
      const phone = form.phone.value.trim();

      const options = {
        key: RAZORPAY_KEY,
        amount: PAYMENT_AMOUNT,
        currency: 'INR',
        name: 'Ruach Media Workshop',
        description: 'Church Media Workshop Registration',
        image: 'https://raw.githubusercontent.com/ruachmedia/registration/refs/heads/main/logo.png.jfif',
        prefill: {
          name: fullName,
          email: email,
          contact: phone
        },
        theme: {
          color: '#2f9afe'
        },
        handler: function(response) {
          saveRegistrationToFirebase(response);
        },
        modal: {
          ondismiss: function() {
            document.getElementById('form-status').textContent = "Payment cancelled. Please try again.";
            document.getElementById('form-status').style.color = "#f59e0b";
          }
        }
      };

      const rzp = new Razorpay(options);
      rzp.open();
    }

    // Save registration to Firebase
    async function saveRegistrationToFirebase(paymentResponse) {
      const form = document.getElementById('registration-form');
      const fullName = form.fullName.value.trim();
      const phone = form.phone.value.trim();
      const email = form.email.value.trim();
      const church = form.church.value.trim();
      const location = form.location.value.trim();
      const role = form.querySelector('input[name="role"]:checked').value;
      
      const confirmationCode = await getNextConfirmationCode();
      const registrationAt = new Date().toISOString();
      const paymentAmount = 1200.00;
      
      const payload = {
        fullName, phone, email, church, location, role,
        confirmationCode,
        paid: true,
        paymentMethod: 'razorpay-checkout',
        razorpayPaymentId: paymentResponse.razorpay_payment_id,
        razorpayOrderId: paymentResponse.razorpay_order_id || null,
        razorpaySignature: paymentResponse.razorpay_signature || null,
        amount: paymentAmount,
        transactionAt: new Date().toISOString(),
        registrationAt
      };
      
      registrationsRef.push(payload)
        .then(() => {
          showSuccessModal(payload);
          form.reset();
          document.getElementById('form-status').textContent = "";
          // Reset role to default
          document.querySelector('input[name="role"][value="Church Leadership/Other"]').checked = true;
        })
        .catch(err => {
          console.error(err);
          document.getElementById('form-status').textContent = 'Payment successful but error saving registration. Please contact support.';
          document.getElementById('form-status').style.color = '#f59e0b';
        });
    }

    // Show success modal
    function showSuccessModal(payload) {
      const modal = document.getElementById('successModal');
      const confirmCodeEl = document.getElementById('confirmationCode');
      const userNameEl = document.getElementById('certUserName');
      const detailsEl = document.getElementById('successDetails');
      
      confirmCodeEl.textContent = payload.confirmationCode;
      userNameEl.textContent = payload.fullName;
      
      detailsEl.innerHTML = `
        <div><strong>Name:</strong> ${payload.fullName}</div>
        <div><strong>Email:</strong> ${payload.email}</div>
        <div><strong>Phone:</strong> ${payload.phone}</div>
        <div><strong>Church:</strong> ${payload.church}</div>
        <div><strong>Location:</strong> ${payload.location}</div>
        <div><strong>Role:</strong> ${payload.role}</div>
        <div style="margin-top:10px;"><strong>Amount Paid:</strong> ‚Çπ${payload.amount}</div>
        <div><strong>Transaction ID:</strong> ${payload.razorpayPaymentId}</div>
        <div style="margin-top:8px; color:limegreen;"><strong>Status:</strong> Payment Confirmed ‚úì</div>
      `;
      
      // Generate QR code
      document.getElementById('qrcodeImg').parentElement.innerHTML = '<div id="qrcode"></div>';
      
      const qrText = `${payload.confirmationCode}|${payload.fullName}|${payload.email}|${payload.church}|${payload.role}|PAID`;
      new QRCode(document.getElementById('qrcode'), {
        text: qrText,
        width: 160,
        height: 160,
        colorDark: '#000',
        colorLight: '#fff',
        correctLevel: QRCode.CorrectLevel.H
      });
      
      openModal(modal);
    }

    // Show error modal
    function showErrorModal(email) {
      const modal = document.getElementById('errorModal');
      const details = document.getElementById('errorDetails');
      
      details.innerHTML = `This email <strong>${email}</strong> has already been registered for the workshop. Each email can only register once. Please use a different email or contact us if you need to update your registration.`;
      
      openModal(modal);
    }

    // Download certificate
    document.getElementById('downloadCertBtn').addEventListener('click', async function() {
      const certificateDiv = document.querySelector('.certificate-container');
      const btn = document.getElementById('downloadCertBtn');
      
      btn.textContent = '‚è≥ Creating image...';
      btn.disabled = true;

      try {
        const canvas = await html2canvas(certificateDiv, {
          backgroundColor: '#000000',
          scale: 2
        });
        
        const link = document.createElement('a');
        const confirmCode = document.getElementById('confirmationCode').textContent;
        link.href = canvas.toDataURL('image/png');
        link.download = `${confirmCode}_workshop_pass.png`;
        link.click();
        
        btn.textContent = '‚úì Image saved!';
        setTimeout(() => {
          btn.textContent = 'üì• Save as Image';
          btn.disabled = false;
        }, 2000);
      } catch (err) {
        console.error(err);
        btn.textContent = '‚ùå Error saving image';
        btn.disabled = false;
      }
    });

    // Done buttons
    document.getElementById('successDoneBtn').addEventListener('click', function(){
      closeModal(document.getElementById('successModal'));
    });

    document.getElementById('errorDoneBtn').addEventListener('click', function(){
      closeModal(document.getElementById('errorModal'));
    });

    document.getElementById('errorCloseBtn').addEventListener('click', function(){
      closeModal(document.getElementById('errorModal'));
    });

    // Role option clicks
    document.querySelectorAll('.option').forEach(label => {
      label.addEventListener('click', function(ev) {
        const radio = label.querySelector('input[type="radio"]');
        if(radio && !radio.checked){
          radio.checked = true;
          radio.dispatchEvent(new Event('change', { bubbles: true }));
        }
      });
    });

    // Reveal observer for animations
    const io = new IntersectionObserver((entries)=>{ 
      entries.forEach(e=>{ 
        if(e.isIntersecting){ 
          e.target.classList.add('in-view'); 
          io.unobserve(e.target); 
        } 
      }); 
    }, { root:null, rootMargin:'0px', threshold:0.12 });
    
    document.querySelectorAll('.reveal').forEach(el => io.observe(el));

    // Header scroll behavior
    (function headerScrollHandler(){
      const headerEl = document.querySelector('header.topbar');
      let ticking = false;
      let scrollTimer = null;
      window.addEventListener('scroll', () => {
        if(!ticking){
          window.requestAnimationFrame(() => {
            const y = window.scrollY || window.pageYOffset;
            if(y > 30) headerEl.classList.add('scrolled'); else headerEl.classList.remove('scrolled');
            document.body.classList.add('scrolling');
            clearTimeout(scrollTimer);
            scrollTimer = setTimeout(()=> { document.body.classList.remove('scrolling'); }, 160);
            ticking = false;
          });
          ticking = true;
        }
      }, { passive: true });
    })();

    // keyboard: ESC closes modal/menu
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        document.querySelectorAll('.success-modal.open, .error-modal.open, .check-status-modal.open, .contact-modal.open').forEach(m=> closeModal(m));
        if(menuPanel.classList.contains('open')) closeMenu();
      }
    });
  </script>
</body>
</html>
